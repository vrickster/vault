<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OneVault</title>
  
  <!-- CSS files from folder structure -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/content-grid.css">
  <link rel="stylesheet" href="css/home.css">
  <link rel="stylesheet" href="css/loading-states.css">
  <link rel="stylesheet" href="css/modal-player.css">
  <link rel="stylesheet" href="css/search.css">
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <!-- Plyr.js for video playback -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/plyr/3.7.8/plyr.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/plyr/3.7.8/plyr.min.js"></script>
  
  <!-- WebTorrent for P2P streaming (optional) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/webtorrent/1.9.7/webtorrent.min.js"></script>
</head>
<body>
  <!-- Removed header as requested -->
  
  <div class="container">
    <div id="main-content" class="fadeIn">
      <h1>OneVault</h1>
      
      <div class="categories">
        <div class="category-card" onclick="showContent('movies')">
          <div class="category-icon">
            <i class="fas fa-film"></i>
          </div>
          <div class="category-title">Movies & TV Shows</div>
        </div>
        
        <div class="category-card" onclick="showContent('anime')">
          <div class="category-icon">
            <i class="fas fa-dragon"></i>
          </div>
          <div class="category-title">Anime</div>
        </div>
        
        <div class="category-card" onclick="showContent('manga')">
          <div class="category-icon">
            <i class="fas fa-book"></i>
          </div>
          <div class="category-title">Manga</div>
        </div>
      </div>
      
      <!-- Search bar that fades in after category selection -->
      <div id="search-container" style="display: none;" class="fadeIn">
        <div class="search-bar">
          <form id="search-form" action="search.html" method="get">
            <div class="search-input-container">
              <i class="fas fa-search"></i>
              <input type="text" id="search-input" name="query" placeholder="Search in this category...">
              <input type="hidden" id="category-input" name="category" value="">
              <i class="fas fa-times clear-search"></i>
            </div>
          </form>
        </div>
      </div>
      
      <!-- Top performers section -->
      <div id="top-performers" style="display: none;" class="fadeIn">
        <h2>Top Performers</h2>
        <div class="content-grid" id="top-performers-grid">
          <!-- Top performers will be loaded dynamically from API -->
        </div>
      </div>
      
      <div id="content" style="display: none;" class="fadeIn">
        <h2 id="category-title"></h2>
        <p id="category-description"></p>
        
        <div class="content-grid" id="content-items">
          <!-- Content items will be loaded dynamically from API -->
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal templates -->
  <template id="loading-template">
    <div class="loading-overlay">
      <div class="loading-spinner"></div>
    </div>
  </template>
  
  <template id="error-template">
    <div class="error-overlay">
      <div class="error-message">
        <i class="fas fa-exclamation-circle"></i>
        <p>{{message}}</p>
        <button class="retry-button">Retry</button>
      </div>
    </div>
  </template>
  
  <!-- Import our scripts -->
  <script src="api.js"></script>
  <script src="app.js"></script>
  
  <script>
    // Script to handle search bar and top performers visibility
    function showContent(category) {
      // Show search bar
      document.getElementById('search-container').style.display = 'block';
      
      // Set the hidden category input value
      document.getElementById('category-input').value = category;
      
      // Show top performers section
      document.getElementById('top-performers').style.display = 'block';
      
      // Show content section
      document.getElementById('content').style.display = 'block';
      
      // Update category title and description
      const titleElement = document.getElementById('category-title');
      const descriptionElement = document.getElementById('category-description');
      
      switch(category) {
        case 'movies':
          titleElement.textContent = 'Movies & TV Shows';
          descriptionElement.textContent = 'Explore your favorite movies and TV series.';
          break;
        case 'anime':
          titleElement.textContent = 'Anime';
          descriptionElement.textContent = 'Discover popular and classic anime series.';
          break;
        case 'manga':
          titleElement.textContent = 'Manga';
          descriptionElement.textContent = 'Read your favorite manga titles.';
          break;
      }
      
      // This would typically make an API call to load content
      loadContent(category);
    }
    
    // Function to simulate content loading - replace with actual API calls
    function loadContent(category) {
      const topPerformersGrid = document.getElementById('top-performers-grid');
      const contentItems = document.getElementById('content-items');
      
      // Clear previous content
      topPerformersGrid.innerHTML = '';
      contentItems.innerHTML = '';
      
      // Here you would typically make API calls to load actual content
      // For now we'll just add a loading message
      contentItems.innerHTML = '<div class="loading">Loading content...</div>';
      topPerformersGrid.innerHTML = '<div class="loading">Loading top performers...</div>';
    }
    
    // Clear search when clicking the X
    document.querySelector('.clear-search').addEventListener('click', function() {
      document.getElementById('search-input').value = '';
      // Trigger search update if needed
    });
    
    // Add event listener for search form submission
    document.getElementById('search-form').addEventListener('submit', function(event) {
      const searchQuery = document.getElementById('search-input').value.trim();
      if (!searchQuery) {
        event.preventDefault(); // Prevent empty searches
      }
    });
  </script>
</body>
  </html>
